(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(Buffer){var msgpack=require("msgpack5")();var bl=require("bl");var looper=require("looper");var _=require("icebreaker");var assert=require("assert");function isFunction(obj){return typeof obj==="function"}function isEncoder(obj){return obj instanceof Object&&obj.type==="encoder"}function isDecoder(obj){return obj instanceof Object&&obj.type==="decoder"}function isCodec(obj){return obj instanceof Object&&obj.type==="codec"}_.mixin({msgpack:{register:function(){function registerEncoder(encoder,callback){if(!isFunction(encoder.check))return callback("encoder has no check function");msgpack.registerEncoder(encoder.check,function(obj){var buffer=bl();_([obj],encoder(),_.drain(function(chunk){buffer.append(chunk)},function(err){if(err)_([err],_.log())}));return buffer.slice(0)});callback()}function registerDecoder(decoder,callback){msgpack.registerDecoder(decoder.subtype,function(data){return _([data],decoder())});return callback()}return _([].slice.apply(arguments),_.asyncMap(function(stream,callback){if(isCodec(stream)){var codec=stream;if(!isEncoder(codec.encoder))return callback("codec encoder is required and must be a _.msgpack.encoder.");if(!isDecoder(codec.decoder))return callback("codec decoder is required and must be a _.msgpack.decoder.");return registerEncoder(codec.encoder,function(err){if(err)return callback(err);registerDecoder(codec.decoder,callback)})}if(isEncoder(stream))return registerEncoder(stream,callback);if(isDecoder(stream))return registerDecoder(stream,callback);callback()}),_.onEnd(function(err){if(err===true)return;assert(err==null||err===true,err)}))},encoder:function(check,encode){var enc=encode;enc.type="encoder";enc.check=check;return enc},decoder:function(type,decoder){var decode=decoder;decode.type="decoder";decode.subtype=type;return decode},codec:function(type,constructor,encode,decode){return{type:"codec",encoder:_.msgpack.encoder(function(obj){return obj instanceof constructor},function(){return _(encode(),_.map(function(obj){var header=new Buffer(1);header.writeInt8(type,0);return[header,obj]}),_.flatten())}),decoder:_.msgpack.decoder(type,decode)}},encode:function(){return _.asyncMap(function(chunk,callback){try{callback(null,msgpack.encode(chunk,true))}catch(err){callback(err)}})},decode:function(){return _(_.through(function(read){var ended=false;return function(abort,callback){read(abort,function next(end,chunk){if(end){if(ended)return;return read(ended=end,callback)}var buffer=bl().append(chunk);looper(function(consume){if(buffer.length>0){try{var decoded=msgpack.decode(buffer);callback(null,isFunction(decoded)?decoded:[decoded]);return consume()}catch(err){return next(err)}}if(!ended)read(null,next)})})}})(),_.flatten())}}})}).call(this,require("buffer").Buffer)},{assert:undefined,bl:2,buffer:undefined,icebreaker:"icebreaker",looper:11,msgpack5:12}],2:[function(require,module,exports){(function(Buffer){var DuplexStream=require("readable-stream/duplex"),util=require("util");function BufferList(callback){if(!(this instanceof BufferList))return new BufferList(callback);this._bufs=[];this.length=0;if(typeof callback=="function"){this._callback=callback;var piper=function(err){if(this._callback){this._callback(err);this._callback=null}}.bind(this);this.on("pipe",function(src){src.on("error",piper)});this.on("unpipe",function(src){src.removeListener("error",piper)})}else if(Buffer.isBuffer(callback))this.append(callback);else if(Array.isArray(callback)){callback.forEach(function(b){Buffer.isBuffer(b)&&this.append(b)}.bind(this))}DuplexStream.call(this)}util.inherits(BufferList,DuplexStream);BufferList.prototype._offset=function(offset){var tot=0,i=0,_t;for(;i<this._bufs.length;i++){_t=tot+this._bufs[i].length;if(offset<_t)return[i,offset-tot];tot=_t}};BufferList.prototype.append=function(buf){var isBuffer=Buffer.isBuffer(buf)||buf instanceof BufferList;this._bufs.push(isBuffer?buf:new Buffer(buf));this.length+=buf.length;return this};BufferList.prototype._write=function(buf,encoding,callback){this.append(buf);if(callback)callback()};BufferList.prototype._read=function(size){if(!this.length)return this.push(null);size=Math.min(size,this.length);this.push(this.slice(0,size));this.consume(size)};BufferList.prototype.end=function(chunk){DuplexStream.prototype.end.call(this,chunk);if(this._callback){this._callback(null,this.slice());this._callback=null}};BufferList.prototype.get=function(index){return this.slice(index,index+1)[0]};BufferList.prototype.slice=function(start,end){return this.copy(null,0,start,end)};BufferList.prototype.copy=function(dst,dstStart,srcStart,srcEnd){if(typeof srcStart!="number"||srcStart<0)srcStart=0;if(typeof srcEnd!="number"||srcEnd>this.length)srcEnd=this.length;if(srcStart>=this.length)return dst||new Buffer(0);if(srcEnd<=0)return dst||new Buffer(0);var copy=!!dst,off=this._offset(srcStart),len=srcEnd-srcStart,bytes=len,bufoff=copy&&dstStart||0,start=off[1],l,i;if(srcStart===0&&srcEnd==this.length){if(!copy)return Buffer.concat(this._bufs);for(i=0;i<this._bufs.length;i++){this._bufs[i].copy(dst,bufoff);bufoff+=this._bufs[i].length}return dst}if(bytes<=this._bufs[off[0]].length-start){return copy?this._bufs[off[0]].copy(dst,dstStart,start,start+bytes):this._bufs[off[0]].slice(start,start+bytes)}if(!copy)dst=new Buffer(len);for(i=off[0];i<this._bufs.length;i++){l=this._bufs[i].length-start;if(bytes>l){this._bufs[i].copy(dst,bufoff,start)}else{this._bufs[i].copy(dst,bufoff,start,start+bytes);break}bufoff+=l;bytes-=l;if(start)start=0}return dst};BufferList.prototype.toString=function(encoding,start,end){return this.slice(start,end).toString(encoding)};BufferList.prototype.consume=function(bytes){while(this._bufs.length){if(bytes>this._bufs[0].length){bytes-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(bytes);this.length-=bytes;break}}return this};BufferList.prototype.duplicate=function(){var i=0,copy=new BufferList;for(;i<this._bufs.length;i++)copy.append(this._bufs[i]);return copy};BufferList.prototype.destroy=function(){this._bufs.length=0;this.length=0;this.push(null)};(function(){var methods={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var m in methods){(function(m){BufferList.prototype[m]=function(offset){return this.slice(offset,offset+methods[m])[m](0)}})(m)}})();module.exports=BufferList}).call(this,require("buffer").Buffer)},{buffer:undefined,"readable-stream/duplex":3,util:undefined}],3:[function(require,module,exports){module.exports=require("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":4}],4:[function(require,module,exports){(function(process){module.exports=Duplex;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};var util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable");var Writable=require("./_stream_writable");util.inherits(Duplex,Readable);forEach(objectKeys(Writable.prototype),function(method){if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]});function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",onend)}function onend(){if(this.allowHalfOpen||this._writableState.ended)return;process.nextTick(this.end.bind(this))}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}}).call(this,require("_process"))},{"./_stream_readable":5,"./_stream_writable":6,_process:undefined,"core-util-is":7,inherits:8}],5:[function(require,module,exports){(function(process){module.exports=Readable;var isArray=require("isarray");var Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;if(!EE.listenerCount)EE.listenerCount=function(emitter,type){return emitter.listeners(type).length};var Stream=require("stream");var util=require("core-util-is");util.inherits=require("inherits");var StringDecoder;util.inherits(Readable,Stream);function ReadableState(options,stream){options=options||{};var hwm=options.highWaterMark;this.highWaterMark=hwm||hwm===0?hwm:16*1024;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=false;this.ended=false;this.endEmitted=false;this.reading=false;this.calledRead=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.objectMode=!!options.objectMode;this.defaultEncoding=options.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;Stream.call(this)}Readable.prototype.push=function(chunk,encoding){var state=this._readableState;if(typeof chunk==="string"&&!state.objectMode){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=new Buffer(chunk,encoding);encoding=""}}return readableAddChunk(this,state,chunk,encoding,false)};Readable.prototype.unshift=function(chunk){var state=this._readableState;return readableAddChunk(this,state,chunk,"",true)};function readableAddChunk(stream,state,chunk,encoding,addToFront){var er=chunkInvalid(state,chunk);if(er){stream.emit("error",er)}else if(chunk===null||chunk===undefined){state.reading=false;if(!state.ended)onEofChunk(stream,state)}else if(state.objectMode||chunk&&chunk.length>0){if(state.ended&&!addToFront){var e=new Error("stream.push() after EOF");stream.emit("error",e)}else if(state.endEmitted&&addToFront){var e=new Error("stream.unshift() after end event");stream.emit("error",e)}else{if(state.decoder&&!addToFront&&!encoding)chunk=state.decoder.write(chunk);state.length+=state.objectMode?1:chunk.length;if(addToFront){state.buffer.unshift(chunk)}else{state.reading=false;state.buffer.push(chunk)}if(state.needReadable)emitReadable(stream);maybeReadMore(stream,state)}}else if(!addToFront){state.reading=false}return needMoreData(state)}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=require("string_decoder/").StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc};var MAX_HWM=8388608;function roundUpToNextPowerOf2(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;for(var p=1;p<32;p<<=1)n|=n>>p;n++}return n}function howMuchToRead(n,state){if(state.length===0&&state.ended)return 0;if(state.objectMode)return n===0?0:1;if(n===null||isNaN(n)){if(state.flowing&&state.buffer.length)return state.buffer[0].length;else return state.length}if(n<=0)return 0;if(n>state.highWaterMark)state.highWaterMark=roundUpToNextPowerOf2(n);if(n>state.length){if(!state.ended){state.needReadable=true;return 0}else return state.length}return n}Readable.prototype.read=function(n){var state=this._readableState;state.calledRead=true;var nOrig=n;var ret;if(typeof n!=="number"||n>0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){ret=null;if(state.length>0&&state.decoder){ret=fromList(n,state);state.length-=ret.length}if(state.length===0)endReadable(this);return ret}var doRead=state.needReadable;if(state.length-n<=state.highWaterMark)doRead=true;if(state.ended||state.reading)doRead=false;if(doRead){state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false}if(doRead&&!state.reading)n=howMuchToRead(nOrig,state);if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0}state.length-=n;if(state.length===0&&!state.ended)state.needReadable=true;if(state.ended&&!state.endEmitted&&state.length===0)endReadable(this);return ret};function chunkInvalid(state,chunk){var er=null;if(!Buffer.isBuffer(chunk)&&"string"!==typeof chunk&&chunk!==null&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}return er}function onEofChunk(stream,state){if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;if(state.length>0)emitReadable(stream);else endReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(state.emittedReadable)return;state.emittedReadable=true;if(state.sync)process.nextTick(function(){emitReadable_(stream)});else emitReadable_(stream)}function emitReadable_(stream){stream.emit("readable")}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;process.nextTick(function(){maybeReadMore_(stream,state)})}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){stream.read(0);if(len===state.length)break;else len=state.length}state.readingMore=false}Readable.prototype._read=function(n){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:cleanup;if(state.endEmitted)process.nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable){if(readable!==src)return;cleanup()}function onend(){dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);function cleanup(){dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",cleanup);if(!dest._writableState||dest._writableState.needDrain)ondrain()}function onerror(er){unpipe();dest.removeListener("error",onerror);if(EE.listenerCount(dest,"error")===0)dest.emit("error",er)}if(!dest._events||!dest._events.error)dest.on("error",onerror);else if(isArray(dest._events.error))dest._events.error.unshift(onerror);else dest._events.error=[onerror,dest._events.error];function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){this.on("readable",pipeOnReadable);state.flowing=true;process.nextTick(function(){flow(src)})}return dest};function pipeOnDrain(src){return function(){var dest=this;var state=src._readableState;state.awaitDrain--;if(state.awaitDrain===0)flow(src)}}function flow(src){var state=src._readableState;var chunk;state.awaitDrain=0;function write(dest,i,list){var written=dest.write(chunk);if(false===written){state.awaitDrain++}}while(state.pipesCount&&null!==(chunk=src.read())){if(state.pipesCount===1)write(state.pipes,0,null);else forEach(state.pipes,write);src.emit("data",chunk);if(state.awaitDrain>0)return}if(state.pipesCount===0){state.flowing=false;if(EE.listenerCount(src,"data")>0)emitDataEvents(src);return}state.ranOut=true}function pipeOnReadable(){if(this._readableState.ranOut){this._readableState.ranOut=false;flow(this)}}Readable.prototype.unpipe=function(dest){var state=this._readableState;if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;this.removeListener("readable",pipeOnReadable);state.flowing=false;if(dest)dest.emit("unpipe",this);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;this.removeListener("readable",pipeOnReadable);state.flowing=false;for(var i=0;i<len;i++)dests[i].emit("unpipe",this);return this}var i=indexOf(state.pipes,dest);if(i===-1)return this;state.pipes.splice(i,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==="data"&&!this._readableState.flowing)emitDataEvents(this);if(ev==="readable"&&this.readable){var state=this._readableState;if(!state.readableListening){state.readableListening=true;state.emittedReadable=false;state.needReadable=true;if(!state.reading){this.read(0)}else if(state.length){emitReadable(this,state)}}}return res};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.resume=function(){emitDataEvents(this);this.read(0);this.emit("resume")};Readable.prototype.pause=function(){emitDataEvents(this,true);this.emit("pause")};function emitDataEvents(stream,startPaused){var state=stream._readableState;if(state.flowing){throw new Error("Cannot switch to old mode now.")}var paused=startPaused||false;var readable=false;stream.readable=true;stream.pipe=Stream.prototype.pipe;stream.on=stream.addListener=Stream.prototype.on;stream.on("readable",function(){readable=true;var c;while(!paused&&null!==(c=stream.read()))stream.emit("data",c);if(c===null){readable=false;stream._readableState.needReadable=true}});stream.pause=function(){paused=true;this.emit("pause")};stream.resume=function(){paused=false;if(readable)process.nextTick(function(){stream.emit("readable")});else this.read(0);this.emit("resume")};stream.emit("readable")}Readable.prototype.wrap=function(stream){var state=this._readableState;var paused=false;var self=this;stream.on("end",function(){if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)self.push(chunk)}self.push(null)});stream.on("data",function(chunk){if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=self.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(typeof stream[i]==="function"&&typeof this[i]==="undefined"){this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i)}}var events=["error","close","destroy","pause","resume"];forEach(events,function(ev){stream.on(ev,self.emit.bind(self,ev))});self._read=function(n){if(paused){paused=false;stream.resume()}};return self};Readable._fromList=fromList;function fromList(n,state){var list=state.buffer;var length=state.length;var stringMode=!!state.decoder;var objectMode=!!state.objectMode;var ret;if(list.length===0)return null;if(length===0)ret=null;else if(objectMode)ret=list.shift();else if(!n||n>=length){if(stringMode)ret=list.join("");else ret=Buffer.concat(list,length);list.length=0}else{if(n<list[0].length){var buf=list[0];ret=buf.slice(0,n);list[0]=buf.slice(n)}else if(n===list[0].length){ret=list.shift()}else{if(stringMode)ret="";else ret=new Buffer(n);var c=0;for(var i=0,l=list.length;i<l&&c<n;i++){var buf=list[0];var cpy=Math.min(n-c,buf.length);if(stringMode)ret+=buf.slice(0,cpy);else buf.copy(ret,c,0,cpy);if(cpy<buf.length)list[0]=buf.slice(cpy);else list.shift();c+=cpy}}}return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error("endReadable called on non-empty stream");if(!state.endEmitted&&state.calledRead){state.ended=true;process.nextTick(function(){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end")}})}}function forEach(xs,f){for(var i=0,l=xs.length;i<l;i++){f(xs[i],i)}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}}).call(this,require("_process"))},{_process:undefined,buffer:undefined,"core-util-is":7,events:undefined,inherits:8,isarray:9,stream:undefined,"string_decoder/":10}],6:[function(require,module,exports){(function(process){module.exports=Writable;var Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream=require("stream");util.inherits(Writable,Stream);function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb}function WritableState(options,stream){options=options||{};var hwm=options.highWaterMark;this.highWaterMark=hwm||hwm===0?hwm:16*1024;this.objectMode=!!options.objectMode;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.buffer=[];this.errorEmitted=false}function Writable(options){var Duplex=require("./_stream_duplex");if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this);this.writable=true;Stream.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function writeAfterEnd(stream,state,cb){var er=new Error("write after end");stream.emit("error",er);process.nextTick(function(){cb(er)})}function validChunk(stream,state,chunk,cb){var valid=true;if(!Buffer.isBuffer(chunk)&&"string"!==typeof chunk&&chunk!==null&&chunk!==undefined&&!state.objectMode){var er=new TypeError("Invalid non-string/buffer chunk");stream.emit("error",er);process.nextTick(function(){cb(er)});valid=false}return valid}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;if(typeof encoding==="function"){cb=encoding;encoding=null}if(Buffer.isBuffer(chunk))encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=function(){};if(state.ended)writeAfterEnd(this,state,cb);else if(validChunk(this,state,chunk,cb))ret=writeOrBuffer(this,state,chunk,encoding,cb);return ret};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=new Buffer(chunk,encoding)}return chunk}function writeOrBuffer(stream,state,chunk,encoding,cb){chunk=decodeChunk(state,chunk,encoding);if(Buffer.isBuffer(chunk))encoding="buffer";var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing)state.buffer.push(new WriteReq(chunk,encoding,cb));else doWrite(stream,state,len,chunk,encoding,cb);return ret}function doWrite(stream,state,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){if(sync)process.nextTick(function(){cb(er)});else cb(er);stream._writableState.errorEmitted=true;stream.emit("error",er)}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(stream,state);if(!finished&&!state.bufferProcessing&&state.buffer.length)clearBuffer(stream,state);if(sync){process.nextTick(function(){afterWrite(stream,state,finished,cb)})}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);cb();if(finished)finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;for(var c=0;c<state.buffer.length;c++){var entry=state.buffer[c];var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,len,chunk,encoding,cb);if(state.writing){c++;break}}state.bufferProcessing=false;if(c<state.buffer.length)state.buffer=state.buffer.slice(c);else state.buffer.length=0}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("not implemented"))};Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(typeof chunk!=="undefined"&&chunk!==null)this.write(chunk,encoding);if(!state.ending&&!state.finished)endWritable(this,state,cb)};function needFinish(stream,state){return state.ending&&state.length===0&&!state.finished&&!state.writing}function finishMaybe(stream,state){var need=needFinish(stream,state);if(need){state.finished=true;stream.emit("finish")}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)process.nextTick(cb);else stream.once("finish",cb)}state.ended=true}}).call(this,require("_process"))},{"./_stream_duplex":4,_process:undefined,buffer:undefined,"core-util-is":7,inherits:8,stream:undefined}],7:[function(require,module,exports){(function(Buffer){function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;function isBuffer(arg){return Buffer.isBuffer(arg)}exports.isBuffer=isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}}).call(this,require("buffer").Buffer)},{buffer:undefined}],8:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],9:[function(require,module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},{}],10:[function(require,module,exports){var Buffer=require("buffer").Buffer;var isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function assertEncoding(encoding){if(encoding&&!isBufferEncoding(encoding)){throw new Error("Unknown encoding: "+encoding)}}var StringDecoder=exports.StringDecoder=function(encoding){this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,"");assertEncoding(encoding);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6);this.charReceived=0;this.charLength=0};StringDecoder.prototype.write=function(buffer){var charStr="";while(this.charLength){var available=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;buffer.copy(this.charBuffer,this.charReceived,0,available);this.charReceived+=available;if(this.charReceived<this.charLength){return""}buffer=buffer.slice(available,buffer.length);charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(charCode>=55296&&charCode<=56319){this.charLength+=this.surrogateSize;charStr="";continue}this.charReceived=this.charLength=0;if(buffer.length===0){return charStr}break}this.detectIncompleteChar(buffer);var end=buffer.length;if(this.charLength){buffer.copy(this.charBuffer,0,buffer.length-this.charReceived,end);end-=this.charReceived}charStr+=buffer.toString(this.encoding,0,end);var end=charStr.length-1;var charCode=charStr.charCodeAt(end);if(charCode>=55296&&charCode<=56319){var size=this.surrogateSize;this.charLength+=size;this.charReceived+=size;this.charBuffer.copy(this.charBuffer,size,0,size);buffer.copy(this.charBuffer,0,0,size);return charStr.substring(0,end)}return charStr};StringDecoder.prototype.detectIncompleteChar=function(buffer){var i=buffer.length>=3?3:buffer.length;for(;i>0;i--){var c=buffer[buffer.length-i];if(i==1&&c>>5==6){this.charLength=2;break}if(i<=2&&c>>4==14){this.charLength=3;break}if(i<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=i};StringDecoder.prototype.end=function(buffer){var res="";if(buffer&&buffer.length)res=this.write(buffer);if(this.charReceived){var cr=this.charReceived;var buf=this.charBuffer;var enc=this.encoding;res+=buf.slice(0,cr).toString(enc)}return res};function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charReceived=buffer.length%2;this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(buffer){this.charReceived=buffer.length%3;this.charLength=this.charReceived?3:0}},{buffer:undefined}],11:[function(require,module,exports){var looper=module.exports=function(fun){(function next(){var loop=true,returned=false,sync=false;do{sync=true;loop=false;fun.call(this,function(){if(sync)loop=true;else next()});sync=false}while(loop)})()}},{}],12:[function(require,module,exports){(function(Buffer){var assert=require("assert"),bl=require("bl"),TOLERANCE=.1,streams=require("./lib/streams"),util=require("util");function msgpack(){
var IncompleteBufferError=function(message){Error.call(this);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name;this.message=message||"unable to decode"};util.inherits(IncompleteBufferError,Error);var encodingTypes=[],decodingTypes=[];var minBufferSizes={204:2,205:3,206:5,207:9,208:2,209:3,210:5,202:5,203:9,217:2,218:3,219:5,196:2,197:3,198:5,222:3,212:3,213:4,214:6,215:10,216:18,199:3,200:4,201:6};function hasMinBufferSize(first,length){var size=minBufferSizes[first];if(size&&length<size){return false}else{return true}}function isValidDataSize(dataLength,bufLength,headerLength){return bufLength>=headerLength+dataLength}function encode(obj,avoidSlice){var buf,len;if(obj===undefined){throw new Error("undefined is not encodable in msgpack!")}else if(obj===null){buf=new Buffer(1);buf[0]=192}else if(obj===true){buf=new Buffer(1);buf[0]=195}else if(obj===false){buf=new Buffer(1);buf[0]=194}else if(typeof obj==="string"){len=Buffer.byteLength(obj);if(len<32){buf=new Buffer(1+len);buf[0]=160|len;buf.write(obj,1)}else if(len<=255){buf=new Buffer(2+len);buf[0]=217;buf[1]=len;buf.write(obj,2)}else if(len<=65535){buf=new Buffer(3+len);buf[0]=218;buf.writeUInt16BE(len,1);buf.write(obj,3)}else{buf=new Buffer(5+len);buf[0]=219;buf.writeUInt32BE(len,1);buf.write(obj,5)}}else if(obj&&obj.readUInt32LE){if(obj.length<=255){buf=new Buffer(2);buf[0]=196;buf[1]=obj.length}else if(obj.length<=65535){buf=new Buffer(3);buf[0]=197;buf.writeUInt16BE(obj.length,1)}else{buf=new Buffer(5);buf[0]=198;buf.writeUInt32BE(obj.length,1)}buf=bl([buf,obj])}else if(Array.isArray(obj)){if(obj.length<16){buf=new Buffer(1);buf[0]=144|obj.length}else if(obj.length<65536){buf=new Buffer(3);buf[0]=220;buf.writeUInt16BE(obj.length,1)}else{buf=new Buffer(5);buf[0]=221;buf.writeUInt32BE(obj.length,1)}buf=obj.reduce(function(acc,obj){acc.append(encode(obj,true));return acc},bl().append(buf))}else if(typeof obj==="object"){buf=encodeExt(obj)||encodeObject(obj)}else if(typeof obj==="number"){if(isFloat(obj)){return encodeFloat(obj)}else if(obj>=0){if(obj<128){buf=new Buffer(1);buf[0]=obj}else if(obj<256){buf=new Buffer(2);buf[0]=204;buf[1]=obj}else if(obj<65536){buf=new Buffer(3);buf[0]=205;buf.writeUInt16BE(obj,1)}else if(obj<4294967295){buf=new Buffer(5);buf[0]=206;buf.writeUInt32BE(obj,1)}else{buf=new Buffer(9);buf[0]=207;write64BitUint(buf,obj)}}else{if(obj>-32){buf=new Buffer(1);buf[0]=256+obj}else if(obj>=-128){buf=new Buffer(2);buf[0]=208;buf.writeInt8(obj,1)}else if(obj>=-32768){buf=new Buffer(3);buf[0]=209;buf.writeInt16BE(obj,1)}else if(obj>-214748365){buf=new Buffer(5);buf[0]=210;buf.writeInt32BE(obj,1)}}}if(!buf)throw new Error("not implemented yet");if(avoidSlice)return buf;else return buf.slice()}function buildDecodeResult(value,bytesConsumed){return{value:value,bytesConsumed:bytesConsumed}}function decode(buf){if(!(buf instanceof bl)){buf=bl().append(buf)}var result=tryDecode(buf);if(result){buf.consume(result.bytesConsumed);return result.value}else{throw new IncompleteBufferError}}function tryDecode(buf,offset){offset=offset===undefined?0:offset;var bufLength=buf.length-offset;if(bufLength<=0){return null}var first=buf.readUInt8(offset),length,result,type;if(!hasMinBufferSize(first,bufLength)){return null}switch(first){case 192:return buildDecodeResult(null,1);case 194:return buildDecodeResult(false,1);case 195:return buildDecodeResult(true,1);case 204:result=buf.readUInt8(offset+1);return buildDecodeResult(result,2);case 205:result=buf.readUInt16BE(offset+1);return buildDecodeResult(result,3);case 206:result=buf.readUInt32BE(offset+1);return buildDecodeResult(result,5);case 207:result=buf.readUInt32BE(offset+5)*4294967295+buf.readUInt32BE(offset+1);return buildDecodeResult(result,9);case 208:result=buf.readInt8(offset+1);return buildDecodeResult(result,2);case 209:result=buf.readInt16BE(offset+1);return buildDecodeResult(result,3);case 210:result=buf.readInt32BE(offset+1);return buildDecodeResult(result,5);case 211:throw new Error("not implemented yet");case 202:result=buf.readFloatBE(offset+1);return buildDecodeResult(result,5);case 203:result=buf.readDoubleBE(offset+1);return buildDecodeResult(result,9);case 217:length=buf.readUInt8(offset+1);if(!isValidDataSize(length,bufLength,2)){return null}result=buf.toString("utf8",offset+2,offset+2+length);return buildDecodeResult(result,2+length);case 218:length=buf.readUInt16BE(offset+1);if(!isValidDataSize(length,bufLength,3)){return null}result=buf.toString("utf8",offset+3,offset+3+length);return buildDecodeResult(result,3+length);case 219:length=buf.readUInt32BE(offset+1);if(!isValidDataSize(length,bufLength,5)){return null}result=buf.toString("utf8",offset+5,offset+5+length);return buildDecodeResult(result,5+length);case 196:length=buf.readUInt8(offset+1);if(!isValidDataSize(length,bufLength,2)){return null}result=buf.slice(offset+2,offset+2+length);return buildDecodeResult(result,2+length);case 197:length=buf.readUInt16BE(offset+1);if(!isValidDataSize(length,bufLength,3)){return null}result=buf.slice(offset+3,offset+3+length);return buildDecodeResult(result,3+length);case 198:length=buf.readUInt32BE(offset+1);if(!isValidDataSize(length,bufLength,5)){return null}result=buf.slice(offset+5,offset+5+length);return buildDecodeResult(result,5+length);case 220:if(bufLength<3){return null}length=buf.readUInt16BE(offset+1);return decodeArray(buf,offset,length,3);case 221:if(bufLength<5){return null}length=buf.readUInt32BE(offset+1);return decodeArray(buf,offset,length,5);case 222:length=buf.readUInt16BE(offset+1);return decodeMap(buf,offset,length,3);case 223:throw new Error("map too big to decode in JS");case 212:return decodeFixExt(buf,offset,1);case 213:return decodeFixExt(buf,offset,2);case 214:return decodeFixExt(buf,offset,4);case 215:return decodeFixExt(buf,offset,8);case 216:return decodeFixExt(buf,offset,16);case 199:length=buf.readUInt8(offset+1);type=buf.readUInt8(offset+2);if(!isValidDataSize(length,bufLength,3)){return null}return decodeExt(buf,offset,type,length,3);case 200:length=buf.readUInt16BE(offset+1);type=buf.readUInt8(offset+3);if(!isValidDataSize(length,bufLength,4)){return null}return decodeExt(buf,offset,type,length,4);case 201:length=buf.readUInt32BE(offset+1);type=buf.readUInt8(offset+5);if(!isValidDataSize(length,bufLength,6)){return null}return decodeExt(buf,offset,type,length,6)}if((first&240)===144){length=first&15;return decodeArray(buf,offset,length,1)}else if((first&240)===128){length=first&15;return decodeMap(buf,offset,length,1)}else if((first&224)===160){length=first&31;if(isValidDataSize(length,bufLength,1)){result=buf.toString("utf8",offset+1,offset+length+1);return buildDecodeResult(result,length+1)}else{return null}}else if(first>224){result=first-256;return buildDecodeResult(result,1)}else if(first<128){return buildDecodeResult(first,1)}else{throw new Error("not implemented yet")}}function decodeArray(buf,offset,length,headerLength){var result=[],i,totalBytesConsumed=0;offset+=headerLength;for(i=0;i<length;i++){var decodeResult=tryDecode(buf,offset);if(decodeResult){result.push(decodeResult.value);offset+=decodeResult.bytesConsumed;totalBytesConsumed+=decodeResult.bytesConsumed}else{return null}}return buildDecodeResult(result,headerLength+totalBytesConsumed)}function decodeMap(buf,offset,length,headerLength){var result={},key,i,totalBytesConsumed=0;offset+=headerLength;for(i=0;i<length;i++){var keyResult=tryDecode(buf,offset);if(keyResult){offset+=keyResult.bytesConsumed;var valueResult=tryDecode(buf,offset);if(valueResult){key=keyResult.value;result[key]=valueResult.value;offset+=valueResult.bytesConsumed;totalBytesConsumed+=keyResult.bytesConsumed+valueResult.bytesConsumed}else{return null}}else{return null}}return buildDecodeResult(result,headerLength+totalBytesConsumed)}function encodeObject(obj){var acc=[],length=0,key,header;for(key in obj){if(obj.hasOwnProperty(key)&&obj[key]!==undefined&&"function"!==typeof obj[key]){++length;acc.push(encode(key,true));acc.push(encode(obj[key],true))}}if(length<16){header=new Buffer(1);header[0]=128|length}else{header=new Buffer(3);header[0]=222;header.writeUInt16BE(length,1)}acc.unshift(header);var result=acc.reduce(function(list,buf){return list.append(buf)},bl());return result}function registerEncoder(check,encode){assert(check,"must have an encode function");assert(encode,"must have an encode function");encodingTypes.push({check:check,encode:encode});return this}function registerDecoder(type,decode){assert(type>=0,"must have a non-negative type");assert(decode,"must have a decode function");decodingTypes.push({type:type,decode:decode});return this}function register(type,constructor,encode,decode){assert(constructor,"must have a constructor");assert(encode,"must have an encode function");assert(type>=0,"must have a non-negative type");assert(decode,"must have a decode function");function check(obj){return obj instanceof constructor}function reEncode(obj){var buf=bl(),header=new Buffer(1);header.writeInt8(type,0);buf.append(header);buf.append(encode(obj));return buf}this.registerEncoder(check,reEncode);this.registerDecoder(type,decode);return this}function encodeExt(obj){var i,encoded,length=-1,headers=[];for(i=0;i<encodingTypes.length;i++){if(encodingTypes[i].check(obj)){encoded=encodingTypes[i].encode(obj);break}}if(!encoded){return null}length=encoded.length-1;if(length===1){headers.push(212)}else if(length===2){headers.push(213)}else if(length===4){headers.push(214)}else if(length===8){headers.push(215)}else if(length===16){headers.push(216)}else if(length<256){headers.push(199);headers.push(length)}else if(length<65536){headers.push(200);headers.push(length>>8);headers.push(length&255)}else{headers.push(201);headers.push(length>>24);headers.push(length>>16&255);headers.push(length>>8&255);headers.push(length&255)}return bl().append(new Buffer(headers)).append(encoded)}function decodeFixExt(buf,offset,size){var type=buf.readUInt8(offset+1);return decodeExt(buf,offset,type,size,2)}function decodeExt(buf,offset,type,size,headerSize){var i,toDecode;offset+=headerSize;for(i=0;i<decodingTypes.length;i++){if(type===decodingTypes[i].type){toDecode=buf.slice(offset,offset+size);var value=decodingTypes[i].decode(toDecode);return buildDecodeResult(value,headerSize+size)}}throw new Error("unable to find ext type "+type)}return{encode:encode,decode:decode,register:register,registerEncoder:registerEncoder,registerDecoder:registerDecoder,encoder:streams.encoder,decoder:streams.decoder,buffer:true,type:"msgpack5",IncompleteBufferError:IncompleteBufferError}}function write64BitUint(buf,obj){var big=Math.floor(obj/4294967295);buf.writeUInt32BE(big,5);buf.writeUInt32BE(obj-big*4294967295,1)}function isFloat(n){return n!==Math.floor(n)}function encodeFloat(obj){var buf;buf=new Buffer(5);buf[0]=202;buf.writeFloatBE(obj,1);if(Math.abs(obj-buf.readFloatBE(1))>TOLERANCE){buf=new Buffer(9);buf[0]=203;buf.writeDoubleBE(obj,1)}return buf}module.exports=msgpack}).call(this,require("buffer").Buffer)},{"./lib/streams":13,assert:undefined,bl:2,buffer:undefined,util:undefined}],13:[function(require,module,exports){var Transform=require("readable-stream").Transform,inherits=require("inherits"),bl=require("bl");function Base(opts){opts=opts||{};opts.objectMode=true;opts.highWaterMark=16;Transform.call(this,opts);this._msgpack=opts.msgpack}inherits(Base,Transform);function Encoder(opts){if(!(this instanceof Encoder)){opts=opts||{};opts.msgpack=this;return new Encoder(opts)}Base.call(this,opts)}inherits(Encoder,Base);Encoder.prototype._transform=function(obj,enc,done){var buf=null;try{buf=this._msgpack.encode(obj).slice(0)}catch(err){this.emit("error",err);return done()}this.push(buf);done()};function Decoder(opts){if(!(this instanceof Decoder)){opts=opts||{};opts.msgpack=this;return new Decoder(opts)}Base.call(this,opts);this._chunks=bl()}inherits(Decoder,Base);Decoder.prototype._transform=function(buf,enc,done){if(buf){this._chunks.append(buf)}try{var result=this._msgpack.decode(this._chunks);this.push(result)}catch(err){if(err instanceof this._msgpack.IncompleteBufferError){done()}else{this.emit("error",err)}return}if(this._chunks.length>0){this._transform(null,enc,done)}else{done()}};module.exports.decoder=Decoder;module.exports.encoder=Encoder},{bl:2,inherits:14,"readable-stream":23}],14:[function(require,module,exports){arguments[4][8][0].apply(exports,arguments)},{dup:8}],15:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{"./_stream_readable":17,"./_stream_writable":19,_process:undefined,"core-util-is":20,dup:4,inherits:14}],16:[function(require,module,exports){module.exports=PassThrough;var Transform=require("./_stream_transform");var util=require("core-util-is");util.inherits=require("inherits");util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":18,"core-util-is":20,inherits:14}],17:[function(require,module,exports){arguments[4][5][0].apply(exports,arguments)},{_process:undefined,buffer:undefined,"core-util-is":20,dup:5,events:undefined,inherits:14,isarray:21,stream:undefined,"string_decoder/":22}],18:[function(require,module,exports){module.exports=Transform;var Duplex=require("./_stream_duplex");var util=require("core-util-is");util.inherits=require("inherits");util.inherits(Transform,Duplex);function TransformState(options,stream){this.afterTransform=function(er,data){return afterTransform(stream,er,data)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null}function afterTransform(stream,er,data){var ts=stream._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb)return stream.emit("error",new Error("no writecb in Transform class"));ts.writechunk=null;ts.writecb=null;if(data!==null&&data!==undefined)stream.push(data);if(cb)cb(er);var rs=stream._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){stream._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);var ts=this._transformState=new TransformState(options,this);var stream=this;this._readableState.needReadable=true;this._readableState.sync=false;this.once("finish",function(){if("function"===typeof this._flush)this._flush(function(er){done(stream,er)});else done(stream)})}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("not implemented")};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};function done(stream,er){if(er)return stream.emit("error",er);var ws=stream._writableState;var rs=stream._readableState;var ts=stream._transformState;if(ws.length)throw new Error("calling transform done when ws.length != 0");if(ts.transforming)throw new Error("calling transform done when still transforming");return stream.push(null)}},{"./_stream_duplex":15,"core-util-is":20,inherits:14}],19:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{"./_stream_duplex":15,_process:undefined,buffer:undefined,"core-util-is":20,dup:6,inherits:14,stream:undefined}],20:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{buffer:undefined,dup:7}],21:[function(require,module,exports){arguments[4][9][0].apply(exports,arguments)},{dup:9}],22:[function(require,module,exports){arguments[4][10][0].apply(exports,arguments)},{buffer:undefined,dup:10}],23:[function(require,module,exports){var Stream=require("stream");exports=module.exports=require("./lib/_stream_readable.js");exports.Stream=Stream;exports.Readable=exports;exports.Writable=require("./lib/_stream_writable.js");exports.Duplex=require("./lib/_stream_duplex.js");exports.Transform=require("./lib/_stream_transform.js");exports.PassThrough=require("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":15,"./lib/_stream_passthrough.js":16,"./lib/_stream_readable.js":17,"./lib/_stream_transform.js":18,"./lib/_stream_writable.js":19,stream:undefined}]},{},[1]);